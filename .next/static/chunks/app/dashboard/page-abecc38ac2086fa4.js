(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2624:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(5155),o=r(2115),n=r(3321),s=r(9229),a=r(4927);let l={draft:"مسودة",hiring:"مرحلة التوظيف",in_progress:"قيد التنفيذ",review:"قيد المراجعة",completed:"مكتمل"},d={unfunded:"لم يتم التمويل",funded:"ممول",released:"تم التحرير",disputed:"قيد النزاع"};function p(){let e,[t,r]=(0,o.useState)([]),[l,d]=(0,o.useState)(!0),[p,b]=(0,o.useState)(!1),g=(0,n.useRouter)();(0,o.useEffect)(()=>{let e=()=>{b(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{let e=s.j2.onAuthStateChanged(e=>{if(!e)return void g.push("/login");let t=(0,a.P)((0,a.rJ)(s.db,"projects"),(0,a._M)("userId","==",e.uid),(0,a.My)("createdAt","desc"),(0,a.AB)(10)),i=(0,a.aQ)(t,e=>{let t=[];e.forEach(e=>{let r=e.data();t.push({id:e.id,title:r.title??"",status:r.status??"draft",budget:r.budget??0,escrowStatus:r.escrowStatus??"unfunded",deadline:r.deadline??null,createdAt:r.createdAt,userId:r.userId})}),r(t),d(!1)});return()=>i()});return()=>e()},[g]);let f=(0,o.useMemo)(()=>{let e=t.length,r=t.filter(e=>"in_progress"===e.status||"review"===e.status).length;return{total:e,active:r,completed:t.filter(e=>"completed"===e.status).length,totalBudget:t.reduce((e,t)=>e+(t.budget||0),0)}},[t]),h=(0,o.useMemo)(()=>t.slice(0,5),[t]);return l?(0,i.jsx)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,i.jsx)("p",{children:"جاري تحميل لوحة التحكم..."})}):(0,i.jsxs)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",padding:p?"60px 12px 20px":"24px 32px"},children:[(0,i.jsxs)("header",{style:{marginBottom:p?16:20,display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,flexWrap:"wrap"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:p?"20px":"24px",fontWeight:700,marginBottom:4},children:"لوحة التحكم"}),(0,i.jsx)("p",{style:{fontSize:"13px",color:"#9ca3af"},children:"مرحباً بك في Monteerly! إليك ملخص نشاطك اليومي."})]}),(0,i.jsx)("button",{type:"button",onClick:()=>g.push("/dashboard/projects/new"),style:{padding:p?"6px 12px":"8px 16px",borderRadius:"999px",border:"none",background:"linear-gradient(135deg,#0DB7B4,#22c55e,#16a34a)",color:"white",fontSize:p?"11px":"12px",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap",boxShadow:"0 12px 30px rgba(16,185,129,0.35)"},children:"+ مشروع جديد"})]}),(0,i.jsxs)("section",{style:{display:"grid",gridTemplateColumns:p?"repeat(2, minmax(0, 1fr))":"repeat(4, minmax(0, 1fr))",gap:p?10:14,marginBottom:p?16:20},children:[(0,i.jsx)(c,{icon:"\uD83D\uDCCA",label:"إجمالي المشاريع",value:f.total,subtext:"منذ البداية",tone:"primary",isMobile:p}),(0,i.jsx)(c,{icon:"⚡",label:"مشاريع نشطة",value:f.active,subtext:"قيد التنفيذ والمراجعة",tone:"accent",isMobile:p}),(0,i.jsx)(c,{icon:"✅",label:"مشاريع مكتملة",value:f.completed,subtext:"تم إنهاؤها بنجاح",tone:"success",isMobile:p}),(0,i.jsx)(c,{icon:"\uD83D\uDCB0",label:"إجمالي الميزانية",value:(e=f.totalBudget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e||0)),subtext:"المتعاقد عليه",tone:"info",isMobile:p})]}),(0,i.jsxs)("section",{style:{marginBottom:p?16:20},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:p?10:12,gap:8},children:[(0,i.jsx)("h2",{style:{fontSize:p?"16px":"18px",fontWeight:700},children:"المشاريع النشطة"}),(0,i.jsx)("button",{type:"button",onClick:()=>g.push("/dashboard/projects"),style:{fontSize:"11px",padding:"5px 10px",borderRadius:"999px",border:"1px solid #374151",backgroundColor:"#020617",color:"#e5e7eb",cursor:"pointer"},children:"عرض الكل ←"})]}),0===t.filter(e=>"in_progress"===e.status||"review"===e.status).slice(0,3).length?(0,i.jsx)("div",{style:{borderRadius:"14px",border:"1px dashed rgba(31,41,55,1)",backgroundColor:"rgba(15,23,42,0.9)",padding:p?12:14,textAlign:"center"},children:(0,i.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:"لا توجد مشاريع نشطة حالياً. ابدأ بمشروع جديد! \uD83D\uDE80"})}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0,1fr)",gap:p?10:12},children:t.filter(e=>"in_progress"===e.status||"review"===e.status).slice(0,3).map(e=>(0,i.jsx)(x,{project:e,onClick:()=>g.push(`/dashboard/projects/${encodeURIComponent(e.id)}`),isMobile:p},e.id))})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:p?10:12,gap:8},children:(0,i.jsx)("h2",{style:{fontSize:p?"16px":"18px",fontWeight:700},children:"آخر المشاريع"})}),0===h.length?(0,i.jsx)("div",{style:{borderRadius:"14px",border:"1px dashed rgba(31,41,55,1)",backgroundColor:"rgba(15,23,42,0.9)",padding:p?12:14,textAlign:"center"},children:(0,i.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:"لا توجد مشاريع بعد. جرّب إنشاء واحد الآن! ✨"})}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:p?"repeat(1, minmax(0, 1fr))":"repeat(2, minmax(0, 1fr))",gap:p?10:12},children:h.map(e=>(0,i.jsx)(u,{project:e,onClick:()=>g.push(`/dashboard/projects/${encodeURIComponent(e.id)}`),isMobile:p},e.id))})]})]})}function c({icon:e,label:t,value:r,subtext:o,tone:n,isMobile:s}){let a={primary:{border:"rgba(56,189,248,0.6)",bg:"rgba(8,47,73,0.95)",color:"#bae6fd"},accent:{border:"rgba(37,99,235,0.7)",bg:"rgba(30,64,175,0.95)",color:"#e0f2fe"},success:{border:"rgba(34,197,94,0.6)",bg:"rgba(5,46,22,0.95)",color:"#bbf7d0"},info:{border:"rgba(249,115,22,0.6)",bg:"rgba(76,29,0,0.95)",color:"#fed7aa"}}[n];return(0,i.jsx)("div",{style:{borderRadius:"14px",border:`1px solid ${a.border}`,backgroundColor:a.bg,padding:s?"10px 12px":"12px 14px"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("div",{style:{fontSize:"18px"},children:e}),(0,i.jsxs)("div",{style:{minWidth:0,flex:1},children:[(0,i.jsx)("p",{style:{fontSize:"10px",color:"#9ca3af",marginBottom:2},children:t}),(0,i.jsx)("p",{style:{fontSize:s?"15px":"16px",fontWeight:700,color:a.color},children:r}),(0,i.jsx)("p",{style:{fontSize:"9px",color:"#6b7280",marginTop:2},children:o})]})]})})}function x({project:e,onClick:t,isMobile:r}){var o;let n,s="funded"===e.escrowStatus?{bg:"rgba(22,163,74,0.18)",border:"#22c55e",text:"#bbf7d0"}:"released"===e.escrowStatus?{bg:"rgba(37,99,235,0.18)",border:"#0ea5e9",text:"#bfdbfe"}:"disputed"===e.escrowStatus?{bg:"rgba(249,115,22,0.18)",border:"#f97316",text:"#fed7aa"}:{bg:"rgba(31,41,55,0.8)",border:"#6b7280",text:"#e5e7eb"};return(0,i.jsxs)("button",{type:"button",onClick:t,style:{textAlign:"right",backgroundColor:"#020617",borderRadius:"14px",border:"1px solid rgba(31,41,55,1)",padding:r?"12px":"14px",display:"grid",gridTemplateColumns:r?"minmax(0,1fr)":"minmax(0,2.4fr) minmax(0,1.4fr)",gap:10,cursor:"pointer"},children:[(0,i.jsxs)("div",{style:{minWidth:0},children:[(0,i.jsx)("p",{style:{fontSize:r?"13px":"14px",fontWeight:600,marginBottom:4,color:"#e5e7eb",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title||"مشروع بدون عنوان"}),(0,i.jsxs)("p",{style:{fontSize:"11px",color:"#9ca3af",marginBottom:6},children:["تسليم: ",(o=e.deadline||null)&&o.toMillis?new Date(o.toMillis()).toLocaleDateString("ar-EG"):"بدون موعد"]}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[(0,i.jsx)("span",{style:{padding:"6px 10px",borderRadius:"999px",fontSize:"11px",borderColor:"#4b5563",backgroundColor:"rgba(15,23,42,0.9)",color:"#e5e7eb",border:"1px solid #4b5563"},children:l[e.status]}),(0,i.jsx)("span",{style:{padding:"6px 10px",borderRadius:"999px",fontSize:"11px",borderColor:s.border,backgroundColor:s.bg,color:s.text,border:`1px solid ${s.border}`},children:d[e.escrowStatus||"unfunded"]})]})]}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:r?"row":"column",justifyContent:r?"space-between":"space-around",alignItems:r?"flex-start":"flex-end",gap:r?8:6},children:(0,i.jsxs)("div",{style:{textAlign:r?"left":"right"},children:[(0,i.jsx)("p",{style:{fontSize:"10px",color:"#9ca3af",marginBottom:2},children:"الميزانية"}),(0,i.jsx)("p",{style:{fontSize:r?"13px":"14px",fontWeight:700},children:(n=e.budget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(n||0))})]})})]})}function u({project:e,onClick:t,isMobile:r}){var o;let n;return(0,i.jsxs)("button",{type:"button",onClick:t,style:{textAlign:"right",backgroundColor:"#020617",borderRadius:"14px",border:"1px solid rgba(31,41,55,1)",padding:"12px",display:"flex",flexDirection:"column",gap:8,cursor:"pointer"},children:[(0,i.jsx)("p",{style:{fontSize:"13px",fontWeight:600,color:"#e5e7eb",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0},children:e.title||"مشروع بدون عنوان"}),(0,i.jsxs)("p",{style:{fontSize:"10px",color:"#9ca3af",margin:0},children:["أنشئ في: ",(o=e.createdAt)&&o.toMillis?new Date(o.toMillis()).toLocaleDateString("ar-EG"):"بدون موعد"]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[(0,i.jsx)("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",backgroundColor:"rgba(13,183,180,0.2)",color:"#a5f3fc",border:"1px solid #0DB7B4"},children:l[e.status]}),(0,i.jsx)("p",{style:{fontSize:"11px",fontWeight:600,color:"#bae6fd",margin:0},children:(n=e.budget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(n||0))})]})]})}},5022:(e,t,r)=>{Promise.resolve().then(r.bind(r,2624))},9229:(e,t,r)=>{"use strict";r.d(t,{G6:()=>x,Ru:()=>c,bk:()=>p,db:()=>d,j2:()=>a,ri:()=>u});var i=r(7873),o=r(5145),n=r(4927);let s=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBkQg0OpIah84-dsC3OQDKWIn1soJACFb0",authDomain:"monteerly-studio.firebaseapp.com",databaseURL:"https://monteerly-studio-default-rtdb.firebaseio.com",projectId:"monteerly-studio",storageBucket:"monteerly-studio.firebasestorage.app",messagingSenderId:"79891455687",appId:"1:79891455687:web:b7a01b2770f899e054a8e2",measurementId:"G-Y5MNPK3K4Y"}),a=(0,o.xI)(s),l=new o.HF,d=(0,n.aU)(s);async function p(e,t){let r=await (0,o.eJ)(a,e,t),i=(0,n.H9)(d,"users",r.user.uid);return await (0,n.BN)(i,{email:r.user.email,createdAt:new Date},{merge:!0}),r.user}function c(e,t){return(0,o.x9)(a,e,t)}async function x(){let e=await (0,o.df)(a,l),t=(0,n.H9)(d,"users",e.user.uid);return(await (0,n.x7)(t)).exists()||await (0,n.BN)(t,{email:e.user.email,createdAt:new Date},{merge:!0}),e.user}function u(){return(0,o.CI)(a)}}},e=>{e.O(0,[992,811,563,441,794,358],()=>e(e.s=5022)),_N_E=e.O()}]);