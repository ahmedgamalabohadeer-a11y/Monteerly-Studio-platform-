(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4992:(e,t,i)=>{Promise.resolve().then(i.bind(i,7348))},7348:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var r=i(5155),o=i(2115),n=i(3321),l=i(9229),d=i(4927);function a(){let[e,t]=(0,o.useState)([]),[i,a]=(0,o.useState)(!0),[p,c]=(0,o.useState)(!1),[x,u]=(0,o.useState)(!1),[g,b]=(0,o.useState)(""),[f,h]=(0,o.useState)({title:"",clientName:"",description:"",budget:"",deadline:""}),m=(0,n.useRouter)();async function y(e){e.preventDefault(),u(!0);try{let e={userId:g,title:f.title,clientName:f.clientName,description:f.description,budget:parseFloat(f.budget),deadline:d.Dc.fromDate(new Date(f.deadline)),status:"pending",createdAt:d.Dc.now()};await (0,d.gS)((0,d.rJ)(l.db,"briefs"),e),h({title:"",clientName:"",description:"",budget:"",deadline:""}),c(!1)}catch(e){console.error("خطأ:",e),alert("فشل إنشاء الطلب")}u(!1)}async function j(e,t){try{let i=(0,d.H9)(l.db,"briefs",e);await (0,d.mZ)(i,{status:t})}catch(e){console.error("خطأ في التحديث:",e)}}if((0,o.useEffect)(()=>{let e=l.j2.onAuthStateChanged(e=>{if(!e)return void m.push("/login");b(e.uid);let i=(0,d.P)((0,d.rJ)(l.db,"briefs"),(0,d._M)("userId","==",e.uid)),r=(0,d.aQ)(i,e=>{let i=[];e.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,t)=>t.createdAt.toMillis()-e.createdAt.toMillis()),t(i),a(!1)});return()=>r()});return()=>e()},[m]),i)return(0,r.jsx)("main",{style:{marginLeft:"260px",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#020617",color:"white"},children:(0,r.jsx)("p",{children:"جاري تحميل الطلبات..."})});let S=e.filter(e=>"pending"===e.status).length,w=e.filter(e=>"accepted"===e.status).length;return(0,r.jsxs)("main",{style:{marginLeft:"260px",padding:"20px 24px",display:"flex",flexDirection:"column",gap:"16px",minHeight:"100vh",backgroundColor:"#020617",color:"white"},children:[(0,r.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{style:{fontSize:"22px",fontWeight:600},children:["الطلبات (",e.length,")"]}),(0,r.jsx)("p",{style:{fontSize:"13px",color:"#9ca3af"},children:"إدارة طلبات العملاء والعروض السعرية"})]}),(0,r.jsx)("button",{onClick:()=>c(!0),style:{padding:"8px 14px",borderRadius:"999px",border:"none",background:"linear-gradient(to right, #3b82f6, #60a5fa)",color:"white",fontWeight:600,fontSize:"13px",cursor:"pointer"},children:"+ طلب جديد"})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[(0,r.jsx)(s,{label:"الطلبات المعلقة",value:S.toString(),hint:"تنتظر الردّ"}),(0,r.jsx)(s,{label:"الطلبات المقبولة",value:w.toString(),hint:"جاهزة للتنفيذ"}),(0,r.jsx)(s,{label:"إجمالي الطلبات",value:e.length.toString(),hint:"كل الطلبات"})]}),(0,r.jsxs)("div",{style:{marginTop:"12px",borderRadius:"12px",border:"1px solid #1f2933",backgroundColor:"#020617",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #1f2933"},children:(0,r.jsx)("h3",{style:{fontSize:"15px",fontWeight:600},children:"قائمة الطلبات"})}),0===e.length?(0,r.jsxs)("div",{style:{padding:"32px 16px",textAlign:"center"},children:[(0,r.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:"لا توجد طلبات حتى الآن."}),(0,r.jsx)("button",{onClick:()=>c(!0),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #3b82f6",backgroundColor:"transparent",color:"#3b82f6",fontSize:"12px",cursor:"pointer"},children:"ابدأ الآن"})]}):(0,r.jsx)("div",{children:e.map(e=>{let t,i={pending:{bg:"#1f2937",text:"#f59e0b",label:"قيد الانتظار"},accepted:{bg:"#065f46",text:"#86efac",label:"مقبول"},"in-progress":{bg:"#1e40af",text:"#93c5fd",label:"قيد التنفيذ"},completed:{bg:"#047857",text:"#6ee7b7",label:"مكتمل"},rejected:{bg:"#7f1d1d",text:"#fca5a5",label:"مرفوض"}}[e.status];return(0,r.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #1f2933"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("p",{style:{fontSize:"14px",fontWeight:500},children:e.title}),(0,r.jsxs)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:["من: ",e.clientName]})]}),(0,r.jsx)("div",{style:{backgroundColor:i.bg,color:i.text,padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:500,marginLeft:"12px",whiteSpace:"nowrap"},children:i.label})]}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"6px"},children:e.description}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",fontSize:"12px",color:"#6b7280"},children:[(0,r.jsxs)("span",{children:["الموازنة: ",(t=e.budget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t))]}),(0,r.jsxs)("span",{children:["الموعد: ",new Date(e.deadline.toMillis()).toLocaleDateString("ar-EG")]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:["pending"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>j(e.id,"accepted"),style:{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#065f46",color:"#86efac",fontSize:"11px",cursor:"pointer"},children:"قبول"}),(0,r.jsx)("button",{onClick:()=>j(e.id,"rejected"),style:{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#7f1d1d",color:"#fca5a5",fontSize:"11px",cursor:"pointer"},children:"رفض"})]}),"accepted"===e.status&&(0,r.jsx)("button",{onClick:()=>j(e.id,"in-progress"),style:{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#1e40af",color:"#93c5fd",fontSize:"11px",cursor:"pointer"},children:"بدء التنفيذ"}),"in-progress"===e.status&&(0,r.jsx)("button",{onClick:()=>j(e.id,"completed"),style:{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#047857",color:"#6ee7b7",fontSize:"11px",cursor:"pointer"},children:"إكمال"})]})]},e.id)})})]}),p&&(0,r.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>!x&&c(!1),children:(0,r.jsxs)("div",{style:{backgroundColor:"#020617",border:"1px solid #1f2933",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"500px"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"إنشاء طلب جديد"}),(0,r.jsxs)("form",{onSubmit:y,children:[(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#9ca3af"},children:"عنوان المشروع"}),(0,r.jsx)("input",{type:"text",value:f.title,onChange:e=>h({...f,title:e.target.value}),placeholder:"مثلاً: فيديو إعلاني 30 ثانية",required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"#111827",color:"white",fontSize:"13px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#9ca3af"},children:"اسم العميل"}),(0,r.jsx)("input",{type:"text",value:f.clientName,onChange:e=>h({...f,clientName:e.target.value}),placeholder:"اسم الشركة أو الفرد",required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"#111827",color:"white",fontSize:"13px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#9ca3af"},children:"الوصف"}),(0,r.jsx)("textarea",{value:f.description,onChange:e=>h({...f,description:e.target.value}),placeholder:"أضف تفاصيل الطلب...",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"#111827",color:"white",fontSize:"13px",fontFamily:"inherit"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#9ca3af"},children:"الموازنة (جنيه مصري)"}),(0,r.jsx)("input",{type:"number",value:f.budget,onChange:e=>h({...f,budget:e.target.value}),placeholder:"5000",required:!0,min:"0",step:"100",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"#111827",color:"white",fontSize:"13px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#9ca3af"},children:"موعد التسليم"}),(0,r.jsx)("input",{type:"date",value:f.deadline,onChange:e=>h({...f,deadline:e.target.value}),required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"#111827",color:"white",fontSize:"13px"}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)("button",{type:"submit",disabled:x,style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"none",background:"linear-gradient(to right, #3b82f6, #60a5fa)",color:"white",fontWeight:600,fontSize:"13px",cursor:x?"not-allowed":"pointer",opacity:x?.5:1},children:x?"جاري الحفظ...":"إنشاء الطلب"}),(0,r.jsx)("button",{type:"button",onClick:()=>c(!1),disabled:x,style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",backgroundColor:"transparent",color:"white",fontWeight:600,fontSize:"13px",cursor:x?"not-allowed":"pointer"},children:"إلغاء"})]})]})]})})]})}function s({label:e,value:t,hint:i}){return(0,r.jsxs)("div",{style:{borderRadius:"12px",border:"1px solid #1f2933",padding:"14px 16px",background:"radial-gradient(circle at top, rgba(59,130,246,0.08), #020617)"},children:[(0,r.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"4px"},children:e}),(0,r.jsx)("p",{style:{fontSize:"22px",fontWeight:600,marginBottom:"6px"},children:t}),(0,r.jsx)("p",{style:{fontSize:"11px",color:"#6b7280"},children:i})]})}},9229:(e,t,i)=>{"use strict";i.d(t,{G6:()=>x,Ru:()=>c,bk:()=>p,db:()=>s,j2:()=>d,ri:()=>u});var r=i(7873),o=i(5145),n=i(4927);let l=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyBkQg0OpIah84-dsC3OQDKWIn1soJACFb0",authDomain:"monteerly-studio.firebaseapp.com",databaseURL:"https://monteerly-studio-default-rtdb.firebaseio.com",projectId:"monteerly-studio",storageBucket:"monteerly-studio.firebasestorage.app",messagingSenderId:"79891455687",appId:"1:79891455687:web:b7a01b2770f899e054a8e2",measurementId:"G-Y5MNPK3K4Y"}),d=(0,o.xI)(l),a=new o.HF,s=(0,n.aU)(l);async function p(e,t){let i=await (0,o.eJ)(d,e,t),r=(0,n.H9)(s,"users",i.user.uid);return await (0,n.BN)(r,{email:i.user.email,createdAt:new Date},{merge:!0}),i.user}function c(e,t){return(0,o.x9)(d,e,t)}async function x(){let e=await (0,o.df)(d,a),t=(0,n.H9)(s,"users",e.user.uid);return(await (0,n.x7)(t)).exists()||await (0,n.BN)(t,{email:e.user.email,createdAt:new Date},{merge:!0}),e.user}function u(){return(0,o.CI)(d)}}},e=>{e.O(0,[992,811,563,441,794,358],()=>e(e.s=4992)),_N_E=e.O()}]);