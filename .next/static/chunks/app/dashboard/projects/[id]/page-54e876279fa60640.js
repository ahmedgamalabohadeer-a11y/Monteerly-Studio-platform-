(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{311:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var o=t(5155),i=t(2115),d=t(3321),a=t(4927),n=t(9229);function s(e){return e&&e.toMillis?new Date(e.toMillis()).toLocaleString("ar-EG"):"تاريخ غير متوفر"}function l(){var e;let r=(0,d.useParams)(),t=(0,d.useRouter)(),l=r?.id||"",[c,p]=(0,i.useState)(null),[b,g]=(0,i.useState)(!0),[u,x]=(0,i.useState)("overview"),[f,h]=(0,i.useState)(!1),[y,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!l)return;let e=(0,a.H9)(n.db,"projects",l),r=(0,a.aQ)(e,e=>{e.exists()?p(e.data()):p(null),g(!1)},()=>g(!1));return()=>r()},[l]);let j=async()=>{h(!0);try{await (0,a.kd)((0,a.H9)(n.db,"projects",l)),t.push("/dashboard/projects")}catch(e){console.error("خطأ في حذف المشروع:",e),h(!1)}};if(!l)return(0,o.jsx)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:16},children:(0,o.jsx)("p",{children:"معرّف المشروع غير صالح."})});if(b)return(0,o.jsx)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:16},children:(0,o.jsx)("p",{children:"جارٍ تحميل بيانات المشروع..."})});if(!c)return(0,o.jsx)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:16},children:(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("p",{style:{marginBottom:8},children:"لم يتم العثور على هذا المشروع."}),(0,o.jsx)("button",{type:"button",onClick:()=>t.push("/dashboard/projects"),style:{padding:"8px 14px",borderRadius:999,border:"1px solid #374151",backgroundColor:"#020617",color:"#e5e7eb",fontSize:12,cursor:"pointer"},children:"العودة لقائمة المشاريع"})]})});let w="hiring"===c.status?"مرحلة التوظيف":"in_progress"===c.status?"قيد التنفيذ":"completed"===c.status?"مكتمل":"draft"===c.status?"مسودة":"غير محدد",S="funded"===c.escrowStatus?"ممول":"released"===c.escrowStatus?"تم التحرير":"disputed"===c.escrowStatus?"قيد النزاع":"لم يتم التمويل",k="funded"===c.escrowStatus?{bg:"rgba(22,163,74,0.18)",border:"#22c55e",text:"#bbf7d0"}:"released"===c.escrowStatus?{bg:"rgba(37,99,235,0.18)",border:"#0ea5e9",text:"#bfdbfe"}:"disputed"===c.escrowStatus?{bg:"rgba(249,115,22,0.18)",border:"#f97316",text:"#fed7aa"}:{bg:"rgba(31,41,55,0.8)",border:"#6b7280",text:"#e5e7eb"};return(0,o.jsxs)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",padding:"60px 12px 20px"},children:[y&&(0,o.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},children:(0,o.jsxs)("div",{style:{borderRadius:"16px",border:"1px solid rgba(31,41,55,1)",background:"linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.9))",padding:"20px",maxWidth:"400px",width:"100%"},children:[(0,o.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,marginBottom:8,color:"#e5e7eb"},children:"تأكيد حذف المشروع"}),(0,o.jsxs)("p",{style:{fontSize:"13px",color:"#9ca3af",marginBottom:16,lineHeight:1.6},children:['هل أنت متأكد من رغبتك في حذف المشروع "',(0,o.jsx)("strong",{children:c.title}),'"؟ لا يمكن التراجع عن هذا الإجراء.']}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[(0,o.jsx)("button",{type:"button",onClick:()=>m(!1),disabled:f,style:{padding:"10px 16px",borderRadius:"10px",border:"1px solid rgba(31,41,55,1)",backgroundColor:"#020617",color:"#e5e7eb",fontSize:"12px",fontWeight:600,cursor:f?"not-allowed":"pointer",opacity:f?.6:1},children:"الغاء"}),(0,o.jsx)("button",{type:"button",onClick:j,disabled:f,style:{padding:"10px 16px",borderRadius:"10px",border:"1px solid #ef4444",backgroundColor:"rgba(239,68,68,0.15)",color:"#fca5a5",fontSize:"12px",fontWeight:600,cursor:f?"not-allowed":"pointer",opacity:f?.6:1},children:f?"جاري الحذف...":"نعم، احذف"})]})]})}),(0,o.jsxs)("section",{style:{borderRadius:18,border:"1px solid rgba(31,41,55,1)",background:"linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.9))",padding:14,marginBottom:12},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,o.jsxs)("div",{style:{minWidth:0,flex:1},children:[(0,o.jsx)("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:4},children:"مساحة عمل المشروع"}),(0,o.jsx)("h1",{style:{fontSize:18,fontWeight:700,marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c.title||"مشروع بدون عنوان"}),(0,o.jsxs)("p",{style:{fontSize:11,color:"#9ca3af"},children:["تم الإنشاء في: ",s(c.createdAt)]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>t.push(`/dashboard/projects/${l}/edit`),style:{padding:"6px 10px",borderRadius:999,border:"1px solid rgba(13,183,180,0.5)",backgroundColor:"rgba(13,183,180,0.1)",color:"#a5f3fc",fontSize:11,whiteSpace:"nowrap",cursor:"pointer"},children:"✏️ تعديل"}),(0,o.jsx)("button",{type:"button",onClick:()=>m(!0),style:{padding:"6px 10px",borderRadius:999,border:"1px solid rgba(239,68,68,0.5)",backgroundColor:"rgba(239,68,68,0.1)",color:"#fca5a5",fontSize:11,whiteSpace:"nowrap",cursor:"pointer"},children:"\uD83D\uDDD1️ حذف"}),(0,o.jsx)("button",{type:"button",onClick:()=>t.push("/dashboard/projects"),style:{padding:"6px 10px",borderRadius:999,border:"1px solid #334155",backgroundColor:"#020617",color:"#e5e7eb",fontSize:11,whiteSpace:"nowrap",cursor:"pointer"},children:"← الرجوع"})]})]}),(0,o.jsxs)("div",{style:{marginTop:10,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:8},children:[(0,o.jsxs)("div",{style:{padding:"8px 10px",borderRadius:"12px",border:"1px solid #4b5563",backgroundColor:"rgba(15,23,42,0.95)"},children:[(0,o.jsx)("p",{style:{fontSize:10,color:"#9ca3af",marginBottom:2},children:"الحالة"}),(0,o.jsx)("p",{style:{fontSize:12,fontWeight:600,color:"#e5e7eb"},children:w})]}),(0,o.jsxs)("div",{style:{padding:"8px 10px",borderRadius:"12px",border:`1px solid ${k.border}`,backgroundColor:k.bg},children:[(0,o.jsx)("p",{style:{fontSize:10,color:"#9ca3af",marginBottom:2},children:"الضمان"}),(0,o.jsx)("p",{style:{fontSize:12,fontWeight:600,color:k.text},children:S})]}),(0,o.jsxs)("div",{style:{padding:"8px 10px",borderRadius:"12px",border:"1px solid rgba(56,189,248,0.6)",backgroundColor:"rgba(8,47,73,0.9)"},children:[(0,o.jsx)("p",{style:{fontSize:10,color:"#9ca3af",marginBottom:2},children:"الميزانية"}),(0,o.jsx)("p",{style:{fontSize:12,fontWeight:600,color:"#bae6fd"},children:(e=c.budget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e||0))})]}),(0,o.jsxs)("div",{style:{padding:"8px 10px",borderRadius:"12px",border:"1px solid rgba(34,197,94,0.6)",backgroundColor:"rgba(5,46,22,0.9)"},children:[(0,o.jsx)("p",{style:{fontSize:10,color:"#9ca3af",marginBottom:2},children:"موعد التسليم"}),(0,o.jsx)("p",{style:{fontSize:12,fontWeight:600,color:"#bbf7d0"},children:s(c.deadline)})]})]})]}),(0,o.jsxs)("section",{style:{borderRadius:16,border:"1px solid rgba(31,41,55,1)",background:"linear-gradient(135deg,rgba(15,23,42,0.98),rgba(15,23,42,0.9))",padding:12},children:[(0,o.jsx)("div",{style:{display:"flex",gap:6,borderBottom:"1px solid rgba(31,41,55,1)",marginBottom:12,paddingBottom:8,overflowX:"auto"},children:[{id:"overview",label:"نظرة عامة"},{id:"tasks",label:"المهام"},{id:"files",label:"الملفات"},{id:"payments",label:"الدفعات"}].map(e=>(0,o.jsx)("button",{type:"button",onClick:()=>x(e.id),style:{padding:"6px 10px",borderRadius:8,border:u===e.id?"1px solid #0DB7B4":"1px solid transparent",backgroundColor:u===e.id?"rgba(13,183,180,0.15)":"transparent",color:u===e.id?"#a5f3fc":"#9ca3af",fontSize:11,fontWeight:u===e.id?600:400,cursor:"pointer",whiteSpace:"nowrap"},children:e.label},e.id))}),"overview"===u&&(0,o.jsxs)("div",{style:{borderRadius:12,backgroundColor:"rgba(15,23,42,0.95)",border:"1px solid rgba(31,41,55,1)",padding:12},children:[(0,o.jsx)("p",{style:{fontSize:13,fontWeight:600,marginBottom:6},children:"وصف المشروع"}),(0,o.jsx)("p",{style:{fontSize:12,color:"#e5e7eb",lineHeight:1.7,whiteSpace:"pre-wrap"},children:c.description||"لا يوجد وصف متاح لهذا المشروع حالياً."})]}),"tasks"===u&&(0,o.jsx)("div",{style:{padding:12,borderRadius:12,backgroundColor:"rgba(15,23,42,0.95)",border:"1px dashed rgba(56,189,248,0.35)"},children:(0,o.jsx)("p",{style:{fontSize:12,color:"#9ca3af",textAlign:"center"},children:"\uD83C\uDFAF سيتم إضافة نظام إدارة المهام قريباً داخل مساحة عمل المشروع."})}),"files"===u&&(0,o.jsx)("div",{style:{padding:12,borderRadius:12,backgroundColor:"rgba(15,23,42,0.95)",border:"1px dashed rgba(34,197,94,0.35)"},children:(0,o.jsx)("p",{style:{fontSize:12,color:"#9ca3af",textAlign:"center"},children:"\uD83D\uDCC1 سيتم إضافة نظام رفع الملفات وتبادل المستندات قريباً."})}),"payments"===u&&(0,o.jsx)("div",{style:{padding:12,borderRadius:12,backgroundColor:"rgba(15,23,42,0.95)",border:"1px dashed rgba(249,115,22,0.35)"},children:(0,o.jsx)("p",{style:{fontSize:12,color:"#9ca3af",textAlign:"center"},children:"\uD83D\uDCB3 سيتم إضافة لوحة تتبع الدفعات وعمليات الـ Escrow قريباً."})})]})]})}},7597:(e,r,t)=>{Promise.resolve().then(t.bind(t,311))},9229:(e,r,t)=>{"use strict";t.d(r,{G6:()=>b,Ru:()=>p,bk:()=>c,db:()=>l,j2:()=>n,ri:()=>g});var o=t(7873),i=t(5145),d=t(4927);let a=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyBkQg0OpIah84-dsC3OQDKWIn1soJACFb0",authDomain:"monteerly-studio.firebaseapp.com",databaseURL:"https://monteerly-studio-default-rtdb.firebaseio.com",projectId:"monteerly-studio",storageBucket:"monteerly-studio.firebasestorage.app",messagingSenderId:"79891455687",appId:"1:79891455687:web:b7a01b2770f899e054a8e2",measurementId:"G-Y5MNPK3K4Y"}),n=(0,i.xI)(a),s=new i.HF,l=(0,d.aU)(a);async function c(e,r){let t=await (0,i.eJ)(n,e,r),o=(0,d.H9)(l,"users",t.user.uid);return await (0,d.BN)(o,{email:t.user.email,createdAt:new Date},{merge:!0}),t.user}function p(e,r){return(0,i.x9)(n,e,r)}async function b(){let e=await (0,i.df)(n,s),r=(0,d.H9)(l,"users",e.user.uid);return(await (0,d.x7)(r)).exists()||await (0,d.BN)(r,{email:e.user.email,createdAt:new Date},{merge:!0}),e.user}function g(){return(0,i.CI)(n)}}},e=>{e.O(0,[992,811,563,441,794,358],()=>e(e.s=7597)),_N_E=e.O()}]);