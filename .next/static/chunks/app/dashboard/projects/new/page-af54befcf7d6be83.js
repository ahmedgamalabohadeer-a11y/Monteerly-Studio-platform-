(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{2892:(e,r,t)=>{Promise.resolve().then(t.bind(t,5030))},5030:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var i=t(5155),o=t(2115),d=t(3321),n=t(9229),a=t(4927);function l(){let[e,r]=(0,o.useState)({title:"",description:"",budget:"",deadline:""}),[t,l]=(0,o.useState)(!1),[s,p]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),x=(0,d.useRouter)();(0,o.useEffect)(()=>{let e=()=>{u(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{let e=n.j2.onAuthStateChanged(e=>{e||x.push("/login")});return()=>e()},[x]);let b=e=>{let{name:t,value:i}=e.target;r(e=>({...e,[t]:i}))},g=async r=>{if(r.preventDefault(),p(""),!e.title.trim())return void p("عنوان المشروع مطلوب");if(!e.budget||0>=parseFloat(e.budget))return void p("الميزانية يجب أن تكون أكبر من صفر");if(!e.deadline)return void p("تاريخ التسليم مطلوب");l(!0);try{let r=n.j2.currentUser;if(!r)throw Error("لا يوجد مستخدم مسجل");let t=await (0,a.gS)((0,a.rJ)(n.db,"projects"),{title:e.title.trim(),description:e.description.trim(),budget:parseFloat(e.budget),deadline:new Date(e.deadline),userId:r.uid,status:"draft",escrowStatus:"unfunded",createdAt:(0,a.O5)()});x.push(`/dashboard/projects/${t.id}`)}catch(e){console.error("خطأ في إنشاء المشروع:",e),p("حدث خطأ أثناء إنشاء المشروع. حاول مرة أخرى."),l(!1)}};return(0,i.jsxs)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",padding:c?"60px 12px 20px":"24px 32px"},children:[(0,i.jsxs)("header",{style:{marginBottom:c?16:20,display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:c?"20px":"24px",fontWeight:700,marginBottom:4},children:"مشروع جديد"}),(0,i.jsx)("p",{style:{fontSize:"13px",color:"#9ca3af"},children:"أنشئ مشروعك الجديد وابدأ التعاون مع فريقك على Monteerly."})]}),(0,i.jsx)("button",{type:"button",onClick:()=>x.push("/dashboard/projects"),style:{padding:"6px 10px",borderRadius:"999px",border:"1px solid #334155",backgroundColor:"#020617",color:"#e5e7eb",fontSize:"11px",whiteSpace:"nowrap",cursor:"pointer"},children:"← الرجوع"})]}),(0,i.jsx)("section",{style:{borderRadius:"16px",border:"1px solid rgba(31,41,55,1)",background:"linear-gradient(135deg,rgba(15,23,42,0.98),rgba(15,23,42,0.9))",padding:c?"16px":"24px",maxWidth:"600px"},children:(0,i.jsxs)("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:16},children:[s&&(0,i.jsx)("div",{style:{backgroundColor:"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.5)",borderRadius:"12px",padding:"12px"},children:(0,i.jsxs)("p",{style:{fontSize:"12px",color:"#fca5a5",margin:0},children:["⚠️ ",s]})}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,i.jsx)("label",{htmlFor:"title",style:{fontSize:"12px",fontWeight:600,color:"#e5e7eb"},children:"عنوان المشروع *"}),(0,i.jsx)("input",{id:"title",type:"text",name:"title",value:e.title,onChange:b,placeholder:"مثال: تطوير تطبيق جوال",style:{width:"100%",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(31,41,55,1)",backgroundColor:"rgba(15,23,42,0.95)",color:"#e5e7eb",fontSize:"13px",fontFamily:"inherit"}})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,i.jsx)("label",{htmlFor:"description",style:{fontSize:"12px",fontWeight:600,color:"#e5e7eb"},children:"وصف المشروع (اختياري)"}),(0,i.jsx)("textarea",{id:"description",name:"description",value:e.description,onChange:b,placeholder:"اشرح تفاصيل المشروع، المتطلبات، والأهداف...",rows:5,style:{width:"100%",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(31,41,55,1)",backgroundColor:"rgba(15,23,42,0.95)",color:"#e5e7eb",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:c?"1fr":"1fr 1fr",gap:12},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,i.jsx)("label",{htmlFor:"budget",style:{fontSize:"12px",fontWeight:600,color:"#e5e7eb"},children:"الميزانية (جنيه مصري) *"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",border:"1px solid rgba(31,41,55,1)",borderRadius:"10px",backgroundColor:"rgba(15,23,42,0.95)",overflow:"hidden"},children:[(0,i.jsx)("input",{id:"budget",type:"number",name:"budget",value:e.budget,onChange:b,placeholder:"5000",min:"0",step:"100",style:{flex:1,padding:"10px 12px",border:"none",backgroundColor:"transparent",color:"#e5e7eb",fontSize:"13px",fontFamily:"inherit"}}),(0,i.jsx)("span",{style:{padding:"10px 12px",backgroundColor:"rgba(31,41,55,0.5)",color:"#9ca3af",fontSize:"12px",fontWeight:600},children:"EGP"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,i.jsx)("label",{htmlFor:"deadline",style:{fontSize:"12px",fontWeight:600,color:"#e5e7eb"},children:"موعد التسليم *"}),(0,i.jsx)("input",{id:"deadline",type:"date",name:"deadline",value:e.deadline,onChange:b,style:{width:"100%",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(31,41,55,1)",backgroundColor:"rgba(15,23,42,0.95)",color:"#e5e7eb",fontSize:"13px",fontFamily:"inherit"}})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:c?"1fr":"1fr 1fr",gap:10,marginTop:8},children:[(0,i.jsx)("button",{type:"button",onClick:()=>x.push("/dashboard/projects"),style:{padding:"10px 16px",borderRadius:"10px",border:"1px solid rgba(31,41,55,1)",backgroundColor:"#020617",color:"#e5e7eb",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"الغاء"}),(0,i.jsx)("button",{type:"submit",disabled:t,style:{padding:"10px 16px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg,#0DB7B4,#22c55e,#16a34a)",color:"white",fontSize:"13px",fontWeight:600,cursor:t?"not-allowed":"pointer",opacity:t?.6:1},children:t?"جاري الإنشاء...":"إنشاء المشروع"})]}),(0,i.jsx)("div",{style:{backgroundColor:"rgba(13,183,180,0.1)",border:"1px solid rgba(13,183,180,0.3)",borderRadius:"10px",padding:"10px 12px",marginTop:8},children:(0,i.jsx)("p",{style:{fontSize:"11px",color:"#a5f3fc",margin:0,lineHeight:1.5},children:"\uD83D\uDCA1 بعد إنشاء المشروع، ستتمكن من إضافة المهام والملفات وإدارة الدفعات من مساحة عمل المشروع."})})]})})]})}},9229:(e,r,t)=>{"use strict";t.d(r,{G6:()=>u,Ru:()=>c,bk:()=>p,db:()=>s,j2:()=>a,ri:()=>x});var i=t(7873),o=t(5145),d=t(4927);let n=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBkQg0OpIah84-dsC3OQDKWIn1soJACFb0",authDomain:"monteerly-studio.firebaseapp.com",databaseURL:"https://monteerly-studio-default-rtdb.firebaseio.com",projectId:"monteerly-studio",storageBucket:"monteerly-studio.firebasestorage.app",messagingSenderId:"79891455687",appId:"1:79891455687:web:b7a01b2770f899e054a8e2",measurementId:"G-Y5MNPK3K4Y"}),a=(0,o.xI)(n),l=new o.HF,s=(0,d.aU)(n);async function p(e,r){let t=await (0,o.eJ)(a,e,r),i=(0,d.H9)(s,"users",t.user.uid);return await (0,d.BN)(i,{email:t.user.email,createdAt:new Date},{merge:!0}),t.user}function c(e,r){return(0,o.x9)(a,e,r)}async function u(){let e=await (0,o.df)(a,l),r=(0,d.H9)(s,"users",e.user.uid);return(await (0,d.x7)(r)).exists()||await (0,d.BN)(r,{email:e.user.email,createdAt:new Date},{merge:!0}),e.user}function x(){return(0,o.CI)(a)}}},e=>{e.O(0,[992,811,563,441,794,358],()=>e(e.s=2892)),_N_E=e.O()}]);