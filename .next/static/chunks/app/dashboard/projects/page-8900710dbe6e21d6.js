(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{989:(e,t,r)=>{Promise.resolve().then(r.bind(r,9091))},9091:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(5155),n=r(2115),s=r(3321),a=r(9229),o=r(4927);let l={draft:"مسودة",hiring:"مرحلة التوظيف",in_progress:"قيد التنفيذ",review:"قيد المراجعة",completed:"مكتمل"},d={unfunded:"لم يتم التمويل",funded:"ممول",released:"تم التحرير",disputed:"قيد النزاع"};function p(){let[e,t]=(0,n.useState)([]),[r,p]=(0,n.useState)(!0),[x,b]=(0,n.useState)("all"),[g,f]=(0,n.useState)(!1),h=(0,s.useRouter)();(0,n.useEffect)(()=>{let e=()=>{f(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=a.j2.onAuthStateChanged(e=>{if(!e)return void h.push("/login");let r=(0,o.P)((0,o.rJ)(a.db,"projects"),(0,o._M)("userId","==",e.uid),(0,o.My)("createdAt","desc")),i=(0,o.aQ)(r,e=>{let r=[];e.forEach(e=>{let t=e.data();r.push({id:e.id,title:t.title??"",status:t.status??"draft",budget:t.budget??0,escrowStatus:t.escrowStatus??"unfunded",deadline:t.deadline??null,description:t.description??"",createdAt:t.createdAt})}),t(r),p(!1)});return()=>i()});return()=>e()},[h]);let m=(0,n.useMemo)(()=>"all"===x?e:e.filter(e=>e.status===x),[e,x]),y=e.filter(e=>"in_progress"===e.status||"review"===e.status).length,j=e.filter(e=>"hiring"===e.status).length,w=e.filter(e=>"completed"===e.status).length,C=e=>e&&e.toMillis?new Date(e.toMillis()).toLocaleDateString("ar-EG"):"بدون موعد";if(r)return(0,i.jsx)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,i.jsx)("p",{children:"جاري تحميل قائمة المشاريع..."})});let v={padding:"6px 12px",borderRadius:"999px",fontSize:"11px",border:"1px solid transparent",whiteSpace:"nowrap"};return(0,i.jsxs)("main",{dir:"rtl",style:{minHeight:"100vh",backgroundColor:"#020617",color:"white",padding:g?"60px 12px 20px":"24px 32px"},children:[(0,i.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:g?12:16,gap:8,flexWrap:"wrap"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:g?"18px":"20px",fontWeight:700,marginBottom:4},children:"المشاريع"}),(0,i.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:"إدارة كل مشاريعك النشطة، المسودات، والمكتملة داخل Monteerly."})]}),(0,i.jsx)("button",{type:"button",onClick:()=>h.push("/dashboard"),style:{fontSize:"12px",padding:"6px 10px",borderRadius:"999px",border:"1px solid #334155",backgroundColor:"#020617",color:"#e5e7eb",cursor:"pointer"},children:"← العودة للوحة التحكم"})]}),(0,i.jsxs)("section",{style:{display:"grid",gridTemplateColumns:g?"1fr 1fr":"repeat(3,minmax(0,1fr))",gap:g?8:12,marginBottom:g?12:16},children:[(0,i.jsx)(c,{label:"مشاريع نشطة",value:y,tone:"primary",isMobile:g}),(0,i.jsx)(c,{label:"مرحلة التوظيف",value:j,tone:"accent",isMobile:g}),(0,i.jsx)(c,{label:"مشاريع مكتملة",value:w,tone:"success",isMobile:g})]}),(0,i.jsxs)("section",{style:{display:"flex",flexDirection:g?"column":"row",justifyContent:"space-between",alignItems:g?"flex-start":"center",gap:10,marginBottom:g?10:14},children:[(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[(0,i.jsx)(u,{active:"all"===x,label:"الكل",onClick:()=>b("all")}),(0,i.jsx)(u,{active:"in_progress"===x,label:"قيد التنفيذ",onClick:()=>b("in_progress")}),(0,i.jsx)(u,{active:"review"===x,label:"قيد المراجعة",onClick:()=>b("review")}),(0,i.jsx)(u,{active:"hiring"===x,label:"التوظيف",onClick:()=>b("hiring")}),(0,i.jsx)(u,{active:"completed"===x,label:"مكتمل",onClick:()=>b("completed")})]}),(0,i.jsx)("button",{type:"button",onClick:()=>h.push("/dashboard/projects"),style:{padding:"7px 14px",borderRadius:"999px",border:"none",background:"linear-gradient(135deg,#0DB7B4,#22c55e,#16a34a)",color:"white",fontSize:"12px",fontWeight:600,cursor:"pointer",boxShadow:"0 12px 30px rgba(16,185,129,0.35)"},children:"+ مشروع جديد (قريباً)"})]}),(0,i.jsx)("section",{style:{borderRadius:"16px",border:"1px solid rgba(31,41,55,1)",background:"linear-gradient(135deg,rgba(15,23,42,0.98),rgba(15,23,42,0.9))",padding:g?"10px":"14px"},children:0===m.length?(0,i.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af",textAlign:"center",padding:"16px 0"},children:"لا توجد مشاريع مطابقة للفلاتر الحالية."}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0,1fr)",gap:g?10:12},children:m.map(e=>{let t,r="funded"===e.escrowStatus?{bg:"rgba(22,163,74,0.18)",border:"#22c55e",text:"#bbf7d0"}:"released"===e.escrowStatus?{bg:"rgba(37,99,235,0.18)",border:"#0ea5e9",text:"#bfdbfe"}:"disputed"===e.escrowStatus?{bg:"rgba(249,115,22,0.18)",border:"#f97316",text:"#fed7aa"}:{bg:"rgba(31,41,55,0.8)",border:"#6b7280",text:"#e5e7eb"};return(0,i.jsxs)("button",{type:"button",onClick:()=>h.push(`/dashboard/projects/${encodeURIComponent(e.id)}`),style:{textAlign:"right",backgroundColor:"#020617",borderRadius:"14px",border:"1px solid rgba(31,41,55,1)",padding:g?"12px":"14px",display:"grid",gridTemplateColumns:g?"minmax(0,1fr)":"minmax(0,2.4fr) minmax(0,1.4fr)",gap:10,cursor:"pointer"},children:[(0,i.jsxs)("div",{style:{minWidth:0},children:[(0,i.jsx)("p",{style:{fontSize:g?"13px":"14px",fontWeight:600,marginBottom:4,color:"#e5e7eb",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title||"مشروع بدون عنوان"}),(0,i.jsxs)("p",{style:{fontSize:"11px",color:"#9ca3af",marginBottom:6},children:["إنشاء: ",C(e.createdAt)," \xb7 تسليم:"," ",C(e.deadline||null)]}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[(0,i.jsxs)("span",{style:{...v,borderColor:"#4b5563",backgroundColor:"rgba(15,23,42,0.9)",color:"#e5e7eb"},children:["الحالة: ",l[e.status]]}),(0,i.jsxs)("span",{style:{...v,borderColor:r.border,backgroundColor:r.bg,color:r.text},children:["الضمان: ",d[e.escrowStatus||"unfunded"]]})]})]}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:g?"row":"column",justifyContent:g?"space-between":"space-around",alignItems:g?"flex-start":"flex-end",gap:g?8:6},children:(0,i.jsxs)("div",{style:{textAlign:g?"left":"right"},children:[(0,i.jsx)("p",{style:{fontSize:"10px",color:"#9ca3af",marginBottom:2},children:"الميزانية"}),(0,i.jsx)("p",{style:{fontSize:g?"13px":"14px",fontWeight:700},children:(t=e.budget,new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t||0))})]})})]},e.id)})})})]})}function c({label:e,value:t,tone:r,isMobile:n}){let s="rgba(148,163,184,0.7)",a="rgba(15,23,42,0.9)",o="#e5e7eb";return"accent"===r?(s="rgba(37,99,235,0.9)",a="rgba(30,64,175,0.95)",o="#e0f2fe"):"success"===r&&(s="rgba(22,163,74,0.9)",a="rgba(5,46,22,0.95)",o="#bbf7d0"),(0,i.jsxs)("div",{style:{borderRadius:"12px",border:`1px solid ${s}`,background:a,padding:n?"8px 10px":"10px 12px"},children:[(0,i.jsx)("p",{style:{fontSize:"11px",color:"#9ca3af",marginBottom:2},children:e}),(0,i.jsx)("p",{style:{fontSize:n?"16px":"18px",fontWeight:700,color:o},children:t})]})}function u({active:e,label:t,onClick:r}){return(0,i.jsx)("button",{type:"button",onClick:r,style:{padding:"5px 10px",borderRadius:"999px",border:e?"1px solid #0DB7B4":"1px solid #374151",backgroundColor:e?"rgba(13,183,180,0.15)":"#020617",color:e?"#a5f3fc":"#e5e7eb",fontSize:"11px",cursor:"pointer"},children:t})}},9229:(e,t,r)=>{"use strict";r.d(t,{G6:()=>u,Ru:()=>c,bk:()=>p,db:()=>d,j2:()=>o,ri:()=>x});var i=r(7873),n=r(5140),s=r(4927);let a=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBkQg0OpIah84-dsC3OQDKWIn1soJACFb0",authDomain:"monteerly-studio.firebaseapp.com",databaseURL:"https://monteerly-studio-default-rtdb.firebaseio.com",projectId:"monteerly-studio",storageBucket:"monteerly-studio.firebasestorage.app",messagingSenderId:"79891455687",appId:"1:79891455687:web:b7a01b2770f899e054a8e2",measurementId:"G-Y5MNPK3K4Y"}),o=(0,n.xI)(a),l=new n.HF,d=(0,s.aU)(a);async function p(e,t){let r=await (0,n.eJ)(o,e,t),i=(0,s.H9)(d,"users",r.user.uid);return await (0,s.BN)(i,{email:r.user.email,createdAt:new Date},{merge:!0}),r.user}function c(e,t){return(0,n.x9)(o,e,t)}async function u(){let e=await (0,n.df)(o,l),t=(0,s.H9)(d,"users",e.user.uid);return(await (0,s.x7)(t)).exists()||await (0,s.BN)(t,{email:e.user.email,createdAt:new Date},{merge:!0}),e.user}function x(){return(0,n.CI)(o)}}},e=>{e.O(0,[992,138,132,441,794,358],()=>e(e.s=989)),_N_E=e.O()}]);